# AutoSedance (manual upload) - environment example
#
# Copy to `.env` and fill in required values:
#   cp .env.example .env
#
# Note: do NOT commit `.env`.

# ---- Required ----

# Volcengine / Doubao API key (LLM + multimodal analysis)
VOLCENGINE_API_KEY=your_volcengine_api_key_here

# ---- Model / workflow ----

# Script + analysis model (optional override)
LLM_MODEL=doubao-seed-2-0-pro-260215

# Default segment duration (seconds)
SEGMENT_DURATION=15

# ---- Storage ----

# Output directory (DB + uploaded videos live under here by default)
OUTPUT_DIR=output

# (optional) Explicit DB URL
# DATABASE_URL=sqlite:///output/autosedance.sqlite3

# (optional) Override projects dir
# PROJECTS_DIR=output/projects

# ---- Auth (invite + password) ----

AUTH_ENABLED=1
AUTH_REQUIRE_FOR_READS=1
AUTH_REQUIRE_FOR_WRITES=1

# Required in production for stable sessions (use a long random string)
AUTH_SECRET_KEY=change_me_to_a_long_random_string
AUTH_SESSION_TTL_DAYS=30

# (optional) Restrict who can register (comma-separated; empty = allow all)
# AUTH_EMAIL_ALLOWLIST=

# Backend baseline rate limits (DB-backed counters)
AUTH_RL_REGISTER_PER_IP_PER_HOUR=30
AUTH_RL_REGISTER_PER_EMAIL_PER_HOUR=6
AUTH_RL_LOGIN_PER_IP_PER_HOUR=240

# Invite codes (viral onboarding)
INVITE_ENABLED=1
INVITE_SEED_COUNT=50
INVITE_CHILDREN_PER_REDEEM=5
INVITE_CODE_PREFIX=AS-

# ---- Upload limits ----

MAX_UPLOAD_MB=300
UPLOAD_VALIDATE_FFPROBE=1

# ---- Reverse proxy / real IP (when behind Nginx) ----

# TRUST_PROXY_HEADERS=1
# TRUSTED_PROXY_IPS=127.0.0.1

# ---- Overload protection ----

OVERLOAD_MAX_INFLIGHT_REQUESTS=30
OVERLOAD_ACQUIRE_TIMEOUT_SECONDS=0.1
OVERLOAD_RETRY_AFTER_SECONDS=10

# ---- Cookie (recommended when frontend is HTTPS) ----

# SESSION_COOKIE_NAME=autos_session
# SESSION_COOKIE_SECURE=1
# SESSION_COOKIE_SAMESITE=lax
# SESSION_COOKIE_DOMAIN=

